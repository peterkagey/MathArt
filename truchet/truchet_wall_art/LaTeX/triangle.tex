\documentclass[tikz]{standalone}
\usepackage{tikz}
\pgfmathsetmacro{\n}{8}
\begin{document}
  \begin{tikzpicture}
    \foreach \b [
      evaluate={\amin using int(-\b/2)},
      evaluate={\amax using int(\n-\b/2)},
      evaluate={\c using 100*\b/\n}
    ] in {0,...,\n} {
      \foreach \a [
        evaluate={\x using \a+\b/2},
        evaluate={\y using \b*sqrt(3)/2},
        evaluate={\r using random(0,2)},
        evaluate={\s using random(0,2)}
      ] in {\amin,...,\amax} {
        \draw[red!\c!yellow, line width=6, rotate around={120*\s:(\x+1,{\y+sqrt(3)/3})}]
          (\x+1, {\y+sqrt(3)/2}) arc (0:-60:0.5)
          (\x+1, {\y+sqrt(3)/2}) arc (180:240:0.5)
        ;
        \draw[blue!\c!magenta, line width=6, rotate around={120*\r:(\x+0.5,{\y+sqrt(3)/6})}]
          (\x+0.5,\y) arc (0:60:0.5)
          (\x+0.5,\y) arc (180:120:0.5)
        ;
      }
    }
  \end{tikzpicture}
\end{document}
